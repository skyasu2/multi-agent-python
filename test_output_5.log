============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-9.0.2, pluggy-1.6.0
rootdir: D:\개인\ai ax\pro
plugins: anyio-4.9.0, langsmith-0.5.1
collected 3 items

tests\test_interrupt_unit.py F..                                         [100%]

================================== FAILURES ===================================
_______________________ test_interrupt_payload_creation _______________________

    def test_interrupt_payload_creation():
        """InterruptPayload 생성 로직 검증"""
        state = create_initial_state("test")
        state.option_question = "테스트 질문"
        state.options = [
            OptionChoice(title="옵션1", description="설명1"),
            {"title": "옵션2", "description": "설명2"} # Dict 호환성 테스트
        ]
        state.input_schema_name = "MockSchema"
    
        payload_dict = create_option_interrupt(state)
    
        # Dict로 반환되어야 함
        assert isinstance(payload_dict, dict)
    
        # 필드 검증
        assert payload_dict["question"] == "테스트 질문"
        assert len(payload_dict["options"]) == 2
        assert payload_dict["type"] == "form" # schema가 있으므로 form
        assert payload_dict["input_schema_name"] == "MockSchema"
>       assert payload_dict["options"][0].title == "옵션1"
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'dict' object has no attribute 'title'

tests\test_interrupt_unit.py:28: AttributeError
=========================== short test summary info ===========================
FAILED tests/test_interrupt_unit.py::test_interrupt_payload_creation - Attrib...
========================= 1 failed, 2 passed in 1.32s =========================
