============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-9.0.2, pluggy-1.6.0 -- C:\Python313\python.exe
cachedir: .pytest_cache
rootdir: D:\개인\ai ax\pro
plugins: anyio-4.9.0, langsmith-0.5.1
collecting ... collected 32 items

tests/test_ui_integration.py::TestInterruptPayloadCreation::test_option_type_payload PASSED [  3%]
tests/test_ui_integration.py::TestInterruptPayloadCreation::test_form_type_payload FAILED [  6%]
tests/test_ui_integration.py::TestInterruptPayloadCreation::test_payload_json_serializable PASSED [  9%]
tests/test_ui_integration.py::TestResumeHandling::test_option_selection_resume PASSED [ 12%]
tests/test_ui_integration.py::TestResumeHandling::test_text_input_resume PASSED [ 15%]
tests/test_ui_integration.py::TestResumeHandling::test_form_data_resume PASSED [ 18%]
tests/test_ui_integration.py::TestResumeHandling::test_empty_resume_handling PASSED [ 21%]
tests/test_ui_integration.py::TestInterruptUIData::test_option_ui_data PASSED [ 25%]
tests/test_ui_integration.py::TestInterruptUIData::test_error_message_in_payload PASSED [ 28%]
tests/test_ui_integration.py::TestInterruptUIData::test_retry_count_tracking PASSED [ 31%]
tests/test_ui_integration.py::TestStepHistoryRecording::test_resume_logged_in_history PASSED [ 34%]
tests/test_ui_integration.py::TestMultipleInterruptScenarios::test_sequential_interrupts PASSED [ 37%]
tests/test_ui_integration.py::TestMultipleInterruptScenarios::test_max_retry_exceeded PASSED [ 40%]
tests/test_ui_integration.py::TestSchemaValidation::test_analysis_result_with_options PASSED [ 43%]
tests/test_ui_integration.py::TestSchemaValidation::test_analysis_result_auto_option_fallback PASSED [ 46%]
tests/test_ui_integration.py::TestSchemaValidation::test_interrupt_payload_schema PASSED [ 50%]
tests/test_time_travel.py::TestStateSnapshot::test_create_snapshot PASSED [ 53%]
tests/test_time_travel.py::TestTimeTravelMock::test_get_current_state PASSED [ 56%]
tests/test_time_travel.py::TestTimeTravelMock::test_get_state_history PASSED [ 59%]
tests/test_time_travel.py::TestTimeTravelMock::test_get_state_at_step PASSED [ 62%]
tests/test_time_travel.py::TestTimeTravelMock::test_get_state_at_invalid_step PASSED [ 65%]
tests/test_time_travel.py::TestTimeTravelMock::test_compare_states PASSED [ 68%]
tests/test_time_travel.py::TestTimeTravelMock::test_rollback_to_step PASSED [ 71%]
tests/test_time_travel.py::TestTimeTravelMock::test_rollback_invalid_step PASSED [ 75%]
tests/test_time_travel.py::TestTimeTravelMock::test_replay_from_step PASSED [ 78%]
tests/test_time_travel.py::TestTimeTravelMock::test_get_step_summary PASSED [ 81%]
tests/test_time_travel.py::TestTimeTravelMock::test_summarize_value_types PASSED [ 84%]
tests/test_time_travel.py::TestTimeTravelErrors::test_get_state_history_error PASSED [ 87%]
tests/test_time_travel.py::TestTimeTravelErrors::test_get_current_state_error PASSED [ 90%]
tests/test_time_travel.py::TestTimeTravelErrors::test_rollback_error PASSED [ 93%]
tests/test_time_travel.py::TestTimeTravelIntegration::test_real_workflow_time_travel SKIPPED [ 96%]
tests/test_time_travel.py::TestTimeTravelIntegration::test_state_modification PASSED [100%]

================================== FAILURES ===================================
_____________ TestInterruptPayloadCreation.test_form_type_payload _____________

self = <test_ui_integration.TestInterruptPayloadCreation object at 0x0000018E0EFB4CD0>
base_state = {'agreed_action_items': [], 'analysis': None, 'chat_history': [], 'chat_summary': None, ...}

    def test_form_type_payload(self, base_state):
        """폼 입력형 페이로드 생성"""
        state = update_state(
            base_state,
            need_more_info=True,
            option_question="추가 정보를 입력해주세요",
            options=[],
            input_schema_name="UserInputSchema"
        )
    
        payload = create_option_interrupt(state, interrupt_id="test_id_form")
    
>       assert payload["type"] == "form"
E       AssertionError: assert 'option' == 'form'
E         
E         - form
E         + option

tests\test_ui_integration.py:71: AssertionError
============================== warnings summary ===============================
utils\schemas.py:26
utils\schemas.py:26
  D:\개인\ai ax\pro\utils\schemas.py:26: DeprecationWarning: Importing FieldValidationInfo from `pydantic` is deprecated. This feature is either no longer supported, or is not public.
    from pydantic import BaseModel, Field, field_validator, model_validator, ValidationInfo, FieldValidationInfo

C:\Users\skyasu-pc\AppData\Roaming\Python\Python313\site-packages\pydantic_core\core_schema.py:4324
C:\Users\skyasu-pc\AppData\Roaming\Python\Python313\site-packages\pydantic_core\core_schema.py:4324
  C:\Users\skyasu-pc\AppData\Roaming\Python\Python313\site-packages\pydantic_core\core_schema.py:4324: DeprecationWarning: `FieldValidationInfo` is deprecated, use `ValidationInfo` instead.
    warnings.warn(msg, DeprecationWarning, stacklevel=1)

tests/test_time_travel.py::TestTimeTravelIntegration::test_state_modification
  <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type SwigPyPacked has no __module__ attribute

tests/test_time_travel.py::TestTimeTravelIntegration::test_state_modification
  <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type SwigPyObject has no __module__ attribute

tests/test_time_travel.py::TestTimeTravelIntegration::test_state_modification
  <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type swigvarlink has no __module__ attribute

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/test_ui_integration.py::TestInterruptPayloadCreation::test_form_type_payload
============ 1 failed, 30 passed, 1 skipped, 7 warnings in 16.87s =============
